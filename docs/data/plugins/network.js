[{"tags":[{"type":"copyright","string":"(c) 2016 able99","html":"<p>(c) 2016 able99</p>"},{"type":"author","string":"able99 (8846755@qq.com)","html":"<p>able99 (8846755@qq.com)</p>"},{"type":"license","string":"MIT","html":"<p>MIT</p>"}],"description":{"full":"<p>bnorth solution</p>","summary":"<p>bnorth solution</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":1,"codeStart":9,"code":"import axios from 'axios';\n\n\nfunction getOption(value, defaultValue, ...args) {\n  let ret = typeof(value)==='function'?value(...args):value;\n  return ret||defaultValue;\n}","ctx":false},{"tags":[{"type":"class","string":"NetworkOptions","html":"<p>NetworkOptions</p>"},{"type":"property","string":"{string|function} [resource=''] - url 地址","name":"[resource='']","description":"<ul>\n<li>url 地址</li>\n</ul>","types":["string","function"],"typesDescription":"<code>string</code>|<code>function</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false},{"type":"property","string":"{string} [baseUrl=app.config.network.baseUrl] - url 地址","name":"[baseUrl=app.config.network.baseUrl]","description":"<ul>\n<li>url 地址</li>\n</ul>","types":["string"],"typesDescription":"<code>string</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false},{"type":"property","string":"{string} [apiUrl=app.config.network.apiUrl] - url 地址","name":"[apiUrl=app.config.network.apiUrl]","description":"<ul>\n<li>url 地址</li>\n</ul>","types":["string"],"typesDescription":"<code>string</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false},{"type":"property","string":"{object|function} [params] - 请求url 的查询字符串对象","name":"[params]","description":"<ul>\n<li>请求url 的查询字符串对象</li>\n</ul>","types":["object","function"],"typesDescription":"<code>object</code>|<code>function</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false},{"type":"property","string":"{object|function} [header] - 请求头","name":"[header]","description":"<ul>\n<li>请求头</li>\n</ul>","types":["object","function"],"typesDescription":"<code>object</code>|<code>function</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false},{"type":"property","string":"{string} [contentType='application/json'] - content type","name":"[contentType='application/json']","description":"<ul>\n<li>content type</li>\n</ul>","types":["string"],"typesDescription":"<code>string</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false},{"type":"property","string":"{string} [method=isFetch?'get':'post'] - http 方法","name":"[method=isFetch?'get':'post']","description":"<ul>\n<li>http 方法</li>\n</ul>","types":["string"],"typesDescription":"<code>string</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false},{"type":"property","string":"{number} [timeout=app.config.networkTimeout] - 请求超时时间","name":"[timeout=app.config.networkTimeout]","description":"<ul>\n<li>请求超时时间</li>\n</ul>","types":["number"],"typesDescription":"<code>number</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false},{"type":"property","string":"{boolean} [noAuth=false] - 指示该请求无需登录信息，一般用户登录操作本身","name":"[noAuth=false]","description":"<ul>\n<li>指示该请求无需登录信息，一般用户登录操作本身</li>\n</ul>","types":["boolean"],"typesDescription":"<code>boolean</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false},{"type":"property","string":"{string} [responseType='json'] - 设定请求结果解析类型(arraybuffer,blob,document,json,text,stream)","name":"[responseType='json']","description":"<ul>\n<li>设定请求结果解析类型(arraybuffer,blob,document,json,text,stream)</li>\n</ul>","types":["string"],"typesDescription":"<code>string</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false},{"type":"property","string":"{function|string|object|ArrayBuffer|FormData|File|Bold} [data] - 请求数据","name":"[data]","description":"<ul>\n<li>请求数据</li>\n</ul>","types":["function","string","object","ArrayBuffer","FormData","File","Bold"],"typesDescription":"<code>function</code>|<code>string</code>|<code>object</code>|<a href=\"ArrayBuffer.html\">ArrayBuffer</a>|<a href=\"FormData.html\">FormData</a>|<a href=\"File.html\">File</a>|<a href=\"Bold.html\">Bold</a>","optional":true,"nullable":false,"nonNullable":false,"variable":false},{"type":"property","string":"{object} [options] - 直接传递给[axios](https://www.npmjs.com/package/axios) 的参数，比如withCredentials，auth，onDownloadProgress，onUploadProgress 等","name":"[options]","description":"<ul>\n<li>直接传递给<a href=\"https://www.npmjs.com/package/axios\">axios</a> 的参数，比如withCredentials，auth，onDownloadProgress，onUploadProgress 等</li>\n</ul>","types":["object"],"typesDescription":"<code>object</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false}],"description":{"full":"<p>网络请求参数</p>","summary":"<p>网络请求参数</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":true,"isEvent":false,"ignore":false,"line":18,"codeStart":34},{"tags":[{"type":"class","string":"","html":""}],"description":{"full":"<p>网络请求</p>","summary":"<p>网络请求</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":true,"isEvent":false,"ignore":false,"line":36,"codeStart":40,"code":"class Network {\n  constructor(app) {\n    this.app = app;\n  }\n\n  // event\n  // ---------------------------","ctx":{"type":"class","constructor":"Network","cons":"Network","name":"Network","extends":"","string":"new Network()"}},{"tags":[{"type":"method","string":"","html":""},{"type":"param","string":"{number} status - 网络请求状态码","name":"status","description":"<ul>\n<li>网络请求状态码</li>\n</ul>","types":["number"],"typesDescription":"<code>number</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{boolean} isFetch - 是获取请求还是操作请求","name":"isFetch","description":"<ul>\n<li>是获取请求还是操作请求</li>\n</ul>","types":["boolean"],"typesDescription":"<code>boolean</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{NetworkOptions} options - 请求参数","name":"options","description":"<ul>\n<li>请求参数</li>\n</ul>","types":["NetworkOptions"],"typesDescription":"<a href=\"NetworkOptions.html\">NetworkOptions</a>","optional":false,"nullable":false,"nonNullable":false,"variable":false}],"description":{"full":"<p>处理网络请求状态的错误</p>","summary":"<p>处理网络请求状态的错误</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":47,"codeStart":54,"code":"_handleStatusError(status,isFetch,options) {\n  switch(status){\n    case 401:\n    this.app.user&&this.app.user.toLogin(null, true);\n      return true;\n    default:\n      return false;\n  }\n}","ctx":{"type":"method","constructor":"Network","cons":"Network","name":"_handleStatusError","string":"Network.prototype._handleStatusError()"}},{"tags":[{"type":"method","string":"","html":""},{"type":"param","string":"{*} result - 请求结果","name":"result","description":"<ul>\n<li>请求结果</li>\n</ul>","types":[],"typesDescription":"<code>*</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{boolean} isFetch - 是获取请求还是操作请求","name":"isFetch","description":"<ul>\n<li>是获取请求还是操作请求</li>\n</ul>","types":["boolean"],"typesDescription":"<code>boolean</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{NetworkOptions} options - 请求参数","name":"options","description":"<ul>\n<li>请求参数</li>\n</ul>","types":["NetworkOptions"],"typesDescription":"<a href=\"NetworkOptions.html\">NetworkOptions</a>","optional":false,"nullable":false,"nonNullable":false,"variable":false}],"description":{"full":"<p>处理返回结果，对结果进行编辑，或者抛出异常，或者跳转</p>","summary":"<p>处理返回结果，对结果进行编辑，或者抛出异常，或者跳转</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":64,"codeStart":71,"code":"_handleResult(result,isFetch,options) {\n  return result;\n}","ctx":{"type":"method","constructor":"Network","cons":"Network","name":"_handleResult","string":"Network.prototype._handleResult()"}},{"tags":[{"type":"method","string":"","html":""},{"type":"param","string":"{string|Error} error - 异常信息","name":"error","description":"<ul>\n<li>异常信息</li>\n</ul>","types":["string","Error"],"typesDescription":"<code>string</code>|<code>Error</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{boolean} isFetch - 是获取请求还是操作请求","name":"isFetch","description":"<ul>\n<li>是获取请求还是操作请求</li>\n</ul>","types":["boolean"],"typesDescription":"<code>boolean</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{NetworkOptions} options - 请求参数","name":"options","description":"<ul>\n<li>请求参数</li>\n</ul>","types":["NetworkOptions"],"typesDescription":"<a href=\"NetworkOptions.html\">NetworkOptions</a>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{object} config - axios 本次请求的实例","name":"config","description":"<ul>\n<li>axios 本次请求的实例</li>\n</ul>","types":["object"],"typesDescription":"<code>object</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false}],"description":{"full":"<p>处理请求异常</p>","summary":"<p>处理请求异常</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":75,"codeStart":83,"code":"_handleError(error, isFetch, options, config) {\n\n}\n\n// format\n// ---------------------------","ctx":{"type":"method","constructor":"Network","cons":"Network","name":"_handleError","string":"Network.prototype._handleError()"}},{"tags":[{"type":"method","string":"","html":""},{"type":"param","string":"{NetworkOptions} options - 请求参数","name":"options","description":"<ul>\n<li>请求参数</li>\n</ul>","types":["NetworkOptions"],"typesDescription":"<a href=\"NetworkOptions.html\">NetworkOptions</a>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{boolean} isFetch - 是获取请求还是操作请求","name":"isFetch","description":"<ul>\n<li>是获取请求还是操作请求</li>\n</ul>","types":["boolean"],"typesDescription":"<code>boolean</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"return","string":"{object} - 请求头部","types":["object"],"typesDescription":"<code>object</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false,"description":"<ul>\n<li>请求头部</li>\n</ul>"}],"description":{"full":"<p>返回请求头部对象</p>","summary":"<p>返回请求头部对象</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":89,"codeStart":96,"code":"_getRequestHeaders(options, isFetch) {\n  return {};\n}","ctx":{"type":"method","constructor":"Network","cons":"Network","name":"_getRequestHeaders","string":"Network.prototype._getRequestHeaders()"}},{"tags":[{"type":"method","string":"","html":""},{"type":"param","string":"{NetworkOptions} options - 请求参数","name":"options","description":"<ul>\n<li>请求参数</li>\n</ul>","types":["NetworkOptions"],"typesDescription":"<a href=\"NetworkOptions.html\">NetworkOptions</a>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{boolean} isFetch - 是获取请求还是操作请求","name":"isFetch","description":"<ul>\n<li>是获取请求还是操作请求</li>\n</ul>","types":["boolean"],"typesDescription":"<code>boolean</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"return","string":"{object} - 查询字符串对象","types":["object"],"typesDescription":"<code>object</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false,"description":"<ul>\n<li>查询字符串对象</li>\n</ul>"}],"description":{"full":"<p>返回请求查询字符串对象</p>","summary":"<p>返回请求查询字符串对象</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":100,"codeStart":107,"code":"_getRequestParams(options, isFetch) {\n  return {};\n}","ctx":{"type":"method","constructor":"Network","cons":"Network","name":"_getRequestParams","string":"Network.prototype._getRequestParams()"}},{"tags":[{"type":"method","string":"","html":""},{"type":"param","string":"{NetworkOptions} options - 请求参数","name":"options","description":"<ul>\n<li>请求参数</li>\n</ul>","types":["NetworkOptions"],"typesDescription":"<a href=\"NetworkOptions.html\">NetworkOptions</a>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{boolean} isFetch - 是获取请求还是操作请求","name":"isFetch","description":"<ul>\n<li>是获取请求还是操作请求</li>\n</ul>","types":["boolean"],"typesDescription":"<code>boolean</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"return","string":"{string} - content type","types":["string"],"typesDescription":"<code>string</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false,"description":"<ul>\n<li>content type</li>\n</ul>"}],"description":{"full":"<p>返回请求content type</p>","summary":"<p>返回请求content type</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":111,"codeStart":118,"code":"_getRequestContentType(options, isFetch){\n  return this.app.config.network.contentType;\n}","ctx":{"type":"method","constructor":"Network","cons":"Network","name":"_getRequestContentType","string":"Network.prototype._getRequestContentType()"}},{"tags":[{"type":"method","string":"","html":""},{"type":"param","string":"{NetworkOptions} options - 请求参数","name":"options","description":"<ul>\n<li>请求参数</li>\n</ul>","types":["NetworkOptions"],"typesDescription":"<a href=\"NetworkOptions.html\">NetworkOptions</a>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{boolean} isFetch - 是获取请求还是操作请求","name":"isFetch","description":"<ul>\n<li>是获取请求还是操作请求</li>\n</ul>","types":["boolean"],"typesDescription":"<code>boolean</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"return","string":"{string} - 请求方法","types":["string"],"typesDescription":"<code>string</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false,"description":"<ul>\n<li>请求方法</li>\n</ul>"}],"description":{"full":"<p>返回请求方法</p>","summary":"<p>返回请求方法</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":122,"codeStart":129,"code":"_getRequestMethod(options, isFetch) {\n  return isFetch?'GET':'POST';\n}","ctx":{"type":"method","constructor":"Network","cons":"Network","name":"_getRequestMethod","string":"Network.prototype._getRequestMethod()"}},{"tags":[{"type":"method","string":"","html":""},{"type":"param","string":"{NetworkOptions} options - 请求参数","name":"options","description":"<ul>\n<li>请求参数</li>\n</ul>","types":["NetworkOptions"],"typesDescription":"<a href=\"NetworkOptions.html\">NetworkOptions</a>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{boolean} isFetch - 是获取请求还是操作请求","name":"isFetch","description":"<ul>\n<li>是获取请求还是操作请求</li>\n</ul>","types":["boolean"],"typesDescription":"<code>boolean</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"return","string":"{string|object|ArrayBuffer|FormData|File|Bold} - 请求数据","types":["string","object","ArrayBuffer","FormData","File","Bold"],"typesDescription":"<code>string</code>|<code>object</code>|<a href=\"ArrayBuffer.html\">ArrayBuffer</a>|<a href=\"FormData.html\">FormData</a>|<a href=\"File.html\">File</a>|<a href=\"Bold.html\">Bold</a>","optional":false,"nullable":false,"nonNullable":false,"variable":false,"description":"<ul>\n<li>请求数据</li>\n</ul>"}],"description":{"full":"<p>返回请求数据</p>","summary":"<p>返回请求数据</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":133,"codeStart":140,"code":"_getRequestData(options, isFetch) {\n  return getOption(options.data, {}, options, isFetch);\n}","ctx":{"type":"method","constructor":"Network","cons":"Network","name":"_getRequestData","string":"Network.prototype._getRequestData()"}},{"tags":[{"type":"method","string":"","html":""},{"type":"param","string":"{NetworkOptions} options - 请求参数","name":"options","description":"<ul>\n<li>请求参数</li>\n</ul>","types":["NetworkOptions"],"typesDescription":"<a href=\"NetworkOptions.html\">NetworkOptions</a>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{boolean} isFetch - 是获取请求还是操作请求","name":"isFetch","description":"<ul>\n<li>是获取请求还是操作请求</li>\n</ul>","types":["boolean"],"typesDescription":"<code>boolean</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"return","string":"{string|object|blob|Arraybuffer} - 返回的数据","types":["string","object","blob","Arraybuffer"],"typesDescription":"<code>string</code>|<code>object</code>|<a href=\"blob.html\">blob</a>|<a href=\"Arraybuffer.html\">Arraybuffer</a>","optional":false,"nullable":false,"nonNullable":false,"variable":false,"description":"<ul>\n<li>返回的数据</li>\n</ul>"}],"description":{"full":"<p>格式化请求返回的数据</p>","summary":"<p>格式化请求返回的数据</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":144,"codeStart":151,"code":"_getResultData(result, isFetch){\n  let data = result.data;\n  delete result.data;\n  return { ...data, _bnorth: result };\n}\n\n\n// fetch\n// ---------------------------","ctx":{"type":"method","constructor":"Network","cons":"Network","name":"_getResultData","string":"Network.prototype._getResultData()"}},{"tags":[{"type":"method","string":"","html":""},{"type":"param","string":"{NetworkOptions} options - 请求参数","name":"options","description":"<ul>\n<li>请求参数</li>\n</ul>","types":["NetworkOptions"],"typesDescription":"<a href=\"NetworkOptions.html\">NetworkOptions</a>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{boolean} isFetch - 是获取请求还是操作请求","name":"isFetch","description":"<ul>\n<li>是获取请求还是操作请求</li>\n</ul>","types":["boolean"],"typesDescription":"<code>boolean</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"return","string":"{Promise} - 请求返回promise-resolve(返回的数据)-reject(错误信息)","types":["Promise"],"typesDescription":"<a href=\"Promise.html\">Promise</a>","optional":false,"nullable":false,"nonNullable":false,"variable":false,"description":"<ul>\n<li>请求返回promise-resolve(返回的数据)-reject(错误信息)</li>\n</ul>"}],"description":{"full":"<p>获取网络数据</p>","summary":"<p>获取网络数据</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":160,"codeStart":167,"code":"fetch(options={}, isFetch=true){\n  return axios({\n    url: options.apiUrl||this.app.config.network.apiUrl + getOption(options.resource, '', options, isFetch),\n    baseURL: options.baseUrl||this.app.config.network.baseUrl,\n    method: this._getRequestMethod(options,isFetch),\n    headers: {\n      ...this._getRequestHeaders(options, isFetch),\n      ...getOption(options.headers, {}, options, isFetch),\n      \"Content-Type\":this._getRequestContentType(options, isFetch),\n    },\n    params: Object.assign({}, \n      ...this._getRequestParams(options, isFetch),\n      ...getOption(options.params, {}, options, isFetch)\n    ),\n    timeout: options.timeout||this.app.config.timeout,\n    responseType: options.responseType||this.app.config.responseType,\n    data: this._getRequestData(options, isFetch),\n    ...getOption(options.options, {}, options, isFetch)\n  })\n  .then(result=>{\n    result = this._getResultData(result, isFetch);\n    result = this._handleResult(result, isFetch, options);\n    return result;\n  },error=>{\n    if(error.response){\n      error = this._handleStatusError(error.response.status, isFetch, error.response, options, error.config);\n    }else {\n      error = this._handleError(error, isFetch, options, error.config);\n    }\n    if(error) throw error;\n  })\n  .then(result=>{\n    return result;\n  },error=>{\n    throw error;\n  });\n}\n}","ctx":{"type":"method","constructor":"Network","cons":"Network","name":"fetch","string":"Network.prototype.fetch()"}},{"tags":[{"type":"class","string":"networkPlugin","html":"<p>networkPlugin</p>"},{"type":"property","string":"{class} app.Network - Network 类","name":"app.Network","description":"<ul>\n<li>Network 类</li>\n</ul>","types":["class"],"typesDescription":"<a href=\"class.html\">class</a>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"property","string":"{Network} app.network - Network 类实例","name":"app.network","description":"<ul>\n<li>Network 类实例</li>\n</ul>","types":["Network"],"typesDescription":"<a href=\"Network.html\">Network</a>","optional":false,"nullable":false,"nonNullable":false,"variable":false}],"description":{"full":"<p><strong>plugin</strong> name: network dependence: none<br />\n提供网络访问的能力扩展</p>","summary":"<p><strong>plugin</strong> name: network dependence: none<br />\n提供网络访问的能力扩展</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":true,"isEvent":false,"ignore":false,"line":207,"codeStart":214,"code":"export default {\n  name: 'network',\n\n  init(app) {\n    app.Network = Network;\n    app.network = new Network(app);\n  }\n}","ctx":false}]