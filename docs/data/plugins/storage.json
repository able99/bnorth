[{"tags":[{"type":"copyright","string":"(c) 2016 able99","html":"<p>(c) 2016 able99</p>"},{"type":"author","string":"able99 (8846755@qq.com)","html":"<p>able99 (8846755@qq.com)</p>"},{"type":"license","string":"MIT","html":"<p>MIT</p>"}],"description":{"full":"<p>bnorth solution</p>","summary":"<p>bnorth solution</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":1,"codeStart":7},{"tags":[{"type":"class","string":"","html":""},{"type":"example","string":"**使用**\napp.storage.xxx // 操作localStorage\napp.sessionStorage.xxx // 操作sessionStorage\n**hook**\n参见Browser hook说明","html":"<p><strong>使用</strong><br />\napp.storage.xxx // 操作localStorage<br />\napp.sessionStorage.xxx // 操作sessionStorage<br />\n<strong>hook</strong><br />\n参见Browser hook说明</p>"}],"description":{"full":"<p>为app 提供存储的能力扩展</p>","summary":"<p>为app 提供存储的能力扩展</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":true,"isEvent":false,"ignore":false,"line":9,"codeStart":19,"code":"class Storage {\n  constructor(app, isSession){\n    this.storage = isSession?window.sessionStorage:window.localStorage;\n  }\n  setObj(item,data){\n    this.storage.setItem(item,JSON.stringify(data));\n  }\n  getObj(item, removeFalse){\n    let val = this.storage.getItem(item);\n    try{\n      let obj = JSON.parse(this.storage.getItem(item));\n      if(!removeFalse) return obj;\n      for(let key in obj){\n        if(!obj[key]) delete obj[key];\n      }\n      return obj;\n    }catch(e){\n      return val;\n    }\n  }\n  set(item,data){\n    this.storage.setItem(item,data);\n  }\n  get(item){\n    let val = this.storage.getItem(item);\n    return val;\n  }\n  remove(item){\n    this.storage.removeItem(item);\n  }\n  clear(reg){\n    if(reg){\n      for(let item in this.storage){\n        if((new RegExp(reg)).test(item)){\n          this.removeItem(item);\n        }\n      }\n    }else{\n      this.storage.clear();\n    }\n  }\n}\n\n\nexport default {\n  init(app) {\n    app.Storage = Storage;\n    app.storage = new Storage(app);\n    app.sessionStorage = new Storage(app, true);\n  }\n}","ctx":{"type":"class","constructor":"Storage","cons":"Storage","name":"Storage","extends":"","string":"new Storage()"}}]