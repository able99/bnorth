[{"tags":[{"type":"copyright","string":"(c) 2016 able99","html":"<p>(c) 2016 able99</p>"},{"type":"author","string":"able99 (8846755@qq.com)","html":"<p>able99 (8846755@qq.com)</p>"},{"type":"license","string":"MIT","html":"<p>MIT</p>"}],"description":{"full":"<p>bnorth solution</p>","summary":"<p>bnorth solution</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":1,"codeStart":7},{"tags":[{"type":"class","string":"","html":""}],"description":{"full":"<p>格式化输出与数据校验功能类</p>","summary":"<p>格式化输出与数据校验功能类</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":true,"isEvent":false,"ignore":false,"line":9,"codeStart":13,"code":"class Format {\n  constructor(app){\n    this.app = app;","ctx":{"type":"class","constructor":"Format","cons":"Format","name":"Format","extends":"","string":"new Format()"}},{"tags":[{"type":"property","string":"{string} [moneyDefault='0.00'] - 金额默认字符串","name":"[moneyDefault='0.00']","description":"<ul>\n<li>金额默认字符串</li>\n</ul>","types":["string"],"typesDescription":"<code>string</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false}],"description":{"full":"","summary":"","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":17,"codeStart":20,"code":"this.moneyDefault = '0.00';","ctx":{"type":"property","receiver":"this","name":"moneyDefault","value":"'0.00'","string":"this.moneyDefault"}},{"tags":[{"type":"property","string":"{string} [timeFormat='YYYY-MM-DD HH:mm:ss'] - 时间默认的格式化字符串","name":"[timeFormat='YYYY-MM-DD","description":"<p>HH:mm:ss'] - 时间默认的格式化字符串</p>","types":["string"],"typesDescription":"<code>string</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false}],"description":{"full":"","summary":"","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":22,"codeStart":25,"code":"this.timeFormat = \"YYYY-MM-DD HH:mm:ss\";","ctx":{"type":"property","receiver":"this","name":"timeFormat","value":"\"YYYY-MM-DD HH:mm:ss\"","string":"this.timeFormat"}},{"tags":[{"type":"property","string":"{string} [byteSizeG='G'] - 文件大小默认字符串","name":"[byteSizeG='G']","description":"<ul>\n<li>文件大小默认字符串</li>\n</ul>","types":["string"],"typesDescription":"<code>string</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false}],"description":{"full":"","summary":"","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":27,"codeStart":30,"code":"this.byteSizeG = 'G';","ctx":{"type":"property","receiver":"this","name":"byteSizeG","value":"'G'","string":"this.byteSizeG"}},{"tags":[{"type":"property","string":"{string} [byteSizeM='M'] - 文件大小默认字符串","name":"[byteSizeM='M']","description":"<ul>\n<li>文件大小默认字符串</li>\n</ul>","types":["string"],"typesDescription":"<code>string</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false}],"description":{"full":"","summary":"","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":31,"codeStart":34,"code":"this.byteSizeM = 'M';","ctx":{"type":"property","receiver":"this","name":"byteSizeM","value":"'M'","string":"this.byteSizeM"}},{"tags":[{"type":"property","string":"{string} [byteSizeK='K'] - 文件大小默认字符串","name":"[byteSizeK='K']","description":"<ul>\n<li>文件大小默认字符串</li>\n</ul>","types":["string"],"typesDescription":"<code>string</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false}],"description":{"full":"","summary":"","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":35,"codeStart":38,"code":"this.byteSizeK = 'K';","ctx":{"type":"property","receiver":"this","name":"byteSizeK","value":"'K'","string":"this.byteSizeK"}},{"tags":[{"type":"property","string":"{string} [byteSizeB='B'] - 文件大小默认字符串","name":"[byteSizeB='B']","description":"<ul>\n<li>文件大小默认字符串</li>\n</ul>","types":["string"],"typesDescription":"<code>string</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false}],"description":{"full":"","summary":"","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":39,"codeStart":42,"code":"this.byteSizeB = 'B';\n  }","ctx":{"type":"property","receiver":"this","name":"byteSizeB","value":"'B'","string":"this.byteSizeB"}},{"tags":[{"type":"method","string":"","html":""},{"type":"param","string":"{number|string} val - 金额","name":"val","description":"<ul>\n<li>金额</li>\n</ul>","types":["number","string"],"typesDescription":"<code>number</code>|<code>string</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false}],"description":{"full":"<p>格式化金额</p>","summary":"<p>格式化金额</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":45,"codeStart":50,"code":"money(val){\n  return !isNaN(val)?Number(val).toFixed(2):this.moneyDefault;\n}","ctx":{"type":"method","name":"money","string":"money()"}},{"tags":[{"type":"method","string":"","html":""},{"type":"param","string":"{number|string} value - 金额","name":"value","description":"<ul>\n<li>金额</li>\n</ul>","types":["number","string"],"typesDescription":"<code>number</code>|<code>string</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{number|string} discount - 折扣","name":"discount","description":"<ul>\n<li>折扣</li>\n</ul>","types":["number","string"],"typesDescription":"<code>number</code>|<code>string</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{number|string} [min=0.01] - 最小金额","name":"[min=0.01]","description":"<ul>\n<li>最小金额</li>\n</ul>","types":["number","string"],"typesDescription":"<code>number</code>|<code>string</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false}],"description":{"full":"<p>计算折扣并格式化</p>","summary":"<p>计算折扣并格式化</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":54,"codeStart":61,"code":"discount(value, discount, min=0.01) {\n  if(isNaN(value)||Number(value)===0) return 0;\n  if(isNaN(discount)) return value;\n\n  return Math.max(Math.round(value*100*discount)/100, min);\n}","ctx":{"type":"method","name":"discount","string":"discount()"}},{"tags":[{"type":"method","string":"","html":""},{"type":"param","string":"{date|number|string} date - 需要格式化的时间","name":"date","description":"<ul>\n<li>需要格式化的时间</li>\n</ul>","types":["date","number","string"],"typesDescription":"<code>date</code>|<code>number</code>|<code>string</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{string} [format=app.format.timeFormat] - 格式化字符串<br />\nYYYY|YY: 年\nMM|M: 月\nDD|D: 日\nHH|H: 时\nmm|m: 分\nss|s: 秒\nS: 毫秒\nQ: 季度","name":"[format=app.format.timeFormat]","description":"<ul>\n<li>格式化字符串<br /> YYYY|YY: 年<br />\nMM|M: 月<br />\nDD|D: 日<br />\nHH|H: 时<br />\nmm|m: 分<br />\nss|s: 秒<br />\nS: 毫秒<br />\nQ: 季度</li>\n</ul>","types":["string"],"typesDescription":"<code>string</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false},{"type":"return","string":"{string} - 格式化后的时间字符串","types":["string"],"typesDescription":"<code>string</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false,"description":"<ul>\n<li>格式化后的时间字符串</li>\n</ul>"}],"description":{"full":"<p>格式化时间</p>","summary":"<p>格式化时间</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":68,"codeStart":83,"code":"time(date, format){\n  date = date instanceof Date ? date : new Date(date);\n  format = format||this.timeFormat;\n  let o = {   \n    \"M+\" : date.getMonth()+1,\n    \"D+\" : date.getDate(),\n    \"H+\" : date.getHours(), \n    \"m+\" : date.getMinutes(), \n    \"s+\" : date.getSeconds(), \n    \"Q+\" : Math.floor((date.getMonth()+3)/3), \n    \"S\"  : date.getMilliseconds(),\n  };   \n\n  if(/(Y+)/.test(format))   \n    format = format.replace(RegExp.$1, (date.getFullYear()+\"\").substr(4 - RegExp.$1.length));   \n  for(var k in o)   \n    if(new RegExp(\"(\"+ k +\")\").test(format))   \n      format = format.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : ((\"00\"+ o[k]).substr((\"\"+ o[k]).length)));   \n  return format; \n}","ctx":{"type":"method","name":"time","string":"time()"}},{"tags":[{"type":"method","string":"","html":""},{"type":"param","string":"{number} size - 文件大小","name":"size","description":"<ul>\n<li>文件大小</li>\n</ul>","types":["number"],"typesDescription":"<code>number</code>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"param","string":"{number} [fixed=2] - 小数点位数","name":"[fixed=2]","description":"<ul>\n<li>小数点位数</li>\n</ul>","types":["number"],"typesDescription":"<code>number</code>","optional":true,"nullable":false,"nonNullable":false,"variable":false}],"description":{"full":"<p>格式化文件尺寸</p>","summary":"<p>格式化文件尺寸</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":false,"isEvent":false,"ignore":false,"line":104,"codeStart":110,"code":"byteSize(size=0, fixed=2){\n  if(size>1024*1024*1024){\n    return (size/1024/1024/1024).toFixed(fixed)+this.byteSizeG;\n  }else if(size>1024*1024){\n    return (size/1024/1024).toFixed(fixed)+this.byteSizeM;\n  }else if(size>1024){\n    return (size/1024).toFixed(fixed)+this.byteSizeK;\n  }else{\n    return (size?size:0)+this.byteSizeB;\n  }\n}\n}","ctx":{"type":"method","name":"byteSize","string":"byteSize()"}},{"tags":[{"type":"class","string":"formatPlugin","html":"<p>formatPlugin</p>"},{"type":"property","string":"{class} app.Format - Format 类","name":"app.Format","description":"<ul>\n<li>Format 类</li>\n</ul>","types":["class"],"typesDescription":"<a href=\"class.html\">class</a>","optional":false,"nullable":false,"nonNullable":false,"variable":false},{"type":"property","string":"{Format} app.format - Format 类实例","name":"app.format","description":"<ul>\n<li>Format 类实例</li>\n</ul>","types":["Format"],"typesDescription":"<a href=\"Format.html\">Format</a>","optional":false,"nullable":false,"nonNullable":false,"variable":false}],"description":{"full":"<p><strong>plugin</strong> name: format dependence: none<br />\n提供格式化输出与数据校验的功能扩展</p>","summary":"<p><strong>plugin</strong> name: format dependence: none<br />\n提供格式化输出与数据校验的功能扩展</p>","body":""},"isPrivate":false,"isConstructor":false,"isClass":true,"isEvent":false,"ignore":false,"line":124,"codeStart":131,"code":"export default {\n  name: 'format',\n  \n  init(app) {\n    app.Format = Format;\n    app.format = new Format(app);\n  }\n}","ctx":false}]